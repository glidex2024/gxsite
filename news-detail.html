<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>消息详情 - Glide.X滑雪学校</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <style>
    /* 修复滚动问题 */
    html, body {
      overflow-x: auto !important;
      overflow-y: auto !important;
      height: auto !important;
    }
    
    body {
      position: relative !important;
      overflow: auto !important;
    }
    
    .container {
      position: relative !important;
      overflow: visible !important;
    }
    
    /* 确保内容可以正常滚动 */
    section {
      position: relative !important;
      overflow: visible !important;
    }
  </style>
</head>
<body>
  <nav id="navbar" class="navbar">
    <div class="container nav-container">
      <a href="index.html" class="logo">GX 中文国际滑雪学校</a>
      <ul class="nav-links">
        <li><a href="index.html">首页</a></li>
        <li><a href="about.html">关于GX</a></li>
        <li><a href="courses.html">课程介绍</a></li>
        <li><a href="coaches.html">教练团队</a></li>
        <li><a href="#faq">常见问题</a></li>
        <li><a href="news.html">最新消息</a></li>
        <li><a href="#offseason">雪季外动态</a></li>
        <li><a href="contact.html">联系我们</a></li>
      </ul>
      <a href="courses.html" class="btn btn-reservation">预约</a>
    </div>
  </nav>
  <!-- 统一hero区 -->
  <header class="" style="height: 50vh; min-height: 120px;">
    <div class="" id="news-hero-bg" style="background:linear-gradient(rgba(17,17,17,0.7),rgba(17,17,17,0.7)),url('https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1600&q=80') center/cover no-repeat;"></div>
    <div class="hero-content" data-aos="fade-up">
      <h1 id="news-title" style="font-size:2.2rem;font-weight:900;background:linear-gradient(90deg,#003366,#ff6600 80%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:2px;padding-bottom:0.2em;border-bottom:3px solid #ff6600;display:inline-block;">消息详情</h1>
      <p id="news-date" style="color:#fff;font-size:1.08em;font-weight:600;margin-top:0.7em;"></p>
    </div>
  </header>
  <section class="container" style="max-width:800px;padding:48px 0 64px 0;">
    <img id="news-img" src="" alt="消息图片" style="width:100%;border-radius:16px;margin-bottom:2rem;display:none;" onerror="this.onerror=null;this.src='/image/hero1.jpg';">
    <div data-aos="fade-up">
      <div id="news-content" style="font-size:1.1rem;line-height:2;"></div>
      <a href="news.html" class="btn" style="margin-top:2rem;">返回最新消息</a>
    </div>
  </section>
  <footer class="footer">
    <div class="container">
      <p>© 2024 Glide.X滑雪学校. 保留所有权利.</p>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>
    // 修复滚动问题
    document.addEventListener('DOMContentLoaded', function() {
      // 强制启用滚动
      document.body.style.overflow = 'auto';
      document.documentElement.style.overflow = 'auto';
      
      // 确保页面可以正常滚动
      document.body.style.height = 'auto';
      document.documentElement.style.height = 'auto';
      
      // 添加键盘滚动支持
      document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowDown' || e.key === 'PageDown') {
          e.preventDefault();
          window.scrollBy(0, 100);
        } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
          e.preventDefault();
          window.scrollBy(0, -100);
        }
      });
      
      // 添加触摸滚动支持
      let startY = 0;
      document.addEventListener('touchstart', function(e) {
        startY = e.touches[0].clientY;
      });
      
      document.addEventListener('touchmove', function(e) {
        e.preventDefault();
        const currentY = e.touches[0].clientY;
        const diff = startY - currentY;
        window.scrollBy(0, diff);
        startY = currentY;
      }, { passive: false });
    });
    
    AOS.init({ duration: 800, once: true });
    window.addEventListener('scroll', function() {
      const navbar = document.getElementById('navbar');
      if (window.scrollY > 60) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });
    // 动态加载消息详情（静态json版）
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }
    const id = getQueryParam('id');
    fetch('news.json')
      .then(res => res.json())
      .then(newsList => {
        const data = newsList.find(n => String(n.id) === String(id));
        if (!data) {
          document.getElementById('news-title').textContent = '消息不存在';
          document.getElementById('news-content').textContent = '';
          document.getElementById('news-img').style.display = 'none';
          document.getElementById('news-hero-bg').style.background = '';
          document.getElementById('news-date').textContent = '';
        } else {
          document.getElementById('news-title').textContent = data.title;
          document.getElementById('news-date').textContent = data.date;
          // 自动分配Unsplash图片
          const unsplashImgs = [
            'https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1515524738708-327f6b0037a7?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=800&q=80'
          ];
          let imgUrl = data.img;
          if (imgUrl && imgUrl.startsWith('/image/news')) {
            const idx = (parseInt(data.id, 10) - 1) % unsplashImgs.length;
            imgUrl = unsplashImgs[idx];
          }
          document.getElementById('news-img').src = imgUrl;
          document.getElementById('news-img').alt = data.title;
          document.getElementById('news-img').style.display = 'block';
          document.getElementById('news-hero-bg').style.background = `linear-gradient(rgba(17,17,17,0.7), rgba(17,17,17,0.7)), url('${imgUrl}') center/cover no-repeat`;
          document.getElementById('news-content').textContent = data.content;
        }
      });
  </script>
</body>
</html> 